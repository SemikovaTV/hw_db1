# Домашнее задание к занятию 1. «Типы и структура СУБД» - Семикова Т.В. FOPS-9

## Задача 1
Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определённых данных. Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:
- электронные чеки в json-виде
- склады и автомобильные дороги для логистической компании
- генеалогические деревья
- кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
- отношения клиент-покупка для интернет-магазина.
Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

## Ответ:

- электронные чеки в json-виде - документоориентированная СУБД - например MongoDB, которая отлично подходит для хранения информации о событиях, электронной коммерции и систем управления документами. Система поддерживает ad-hoc-запросы: они могут возвращать конкретные поля документов и пользовательские JavaScript-функции.

- склады и автомобильные дороги для логистической компании - реляционная СУБД - PostgreSQL или MySQL, поскольку в данном случае необходимо хранить структурированные данные с отношениями многие ко многим.

- генеалогические деревья - графовая СУБД, поскольку генеалогическое древо является своего рода сетевой моделью данных, имеет четкую иерархию. Например - Janus graph.

- кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации - резидентные СУБД, благодаря быстрому времени отклика, из-за хранения и обработки данных в оперативной памяти. Redis или Memcached.

- отношения клиент-покупка для интернет-магазина - реляционная СУБД - PostgreSQL или MySQL, поскольку в данном случае необходимо не только хранить данные, но и обеспечивать их связность.

## Задача 2
Вы создали распределённое высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт — это отдельная реализация вашей системы и для каждого пункта нужно привести классификацию):
- данные записываются на все узлы с задержкой до часа (асинхронная запись);
- при сетевых сбоях система может разделиться на 2 раздельных кластера;
- система может не прислать корректный ответ или сбросить соединение.
Согласно PACELC-теореме как бы вы классифицировали эти реализации?

## Ответ:

- данные записываются на все узлы с задержкой до часа (асинхронная запись);
По САР: AP - доступность и устойчивость к разделению. Синхронности данных при асинхронной записи не получится.
По PACELS: PC/EL - Данная архитектура при разделении стремится оставаться консистентной, а в случае без сетевых разделений, фокусируется на скорости ответа, отводя консистентность на второй план.

- при сетевых сбоях система может разделиться на 2 раздельных кластера;
По САР: АР - мы жертвуем синхронностью данных между кластерами взамен на их доступность и устойчивость к разделению.
По PACELS: PC/EL.

- система может не прислать корректный ответ или сбросить соединение;
По САР: СР - в каждый момент обеспечивает целостность данных и способна работать в условиях распада в ущерб доступности, не выдавая отклик на запрос.
По PACELS: PC/EC - жертвуем доступностью в угоду целостности данных.

## Задача 3
Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

## Ответ:

Нет, поскольку их принципы противоречат друг другу. ACID имеет принцип немедленной согласованности данных и запрете на транзакции до тех пор, пока база данных не придет в согласованное состояние,  в то время как BASE предполагает чтобы в какой-то момент в будущем данные сходились в согласованное состояние. Однако нет никаких гарантий относительно того, когда это произойдет. Кроме того, принципы BASE предполагают базовую доступность данных, даже при наличии сбоев.

## Задача 4
Вам дали задачу написать системное решение, основой которого бы послужили:
- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута.
Вы слышали о key-value-хранилище, которое имеет механизм Pub/Sub. Что это за система? Какие минусы выбора этой системы?
